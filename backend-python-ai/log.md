2026-02-09 22:47:58 - app.api.middleware - INFO - [unknown] - [97876ad1-3252-4122-ad78-54b84f2842cf] 收到请求 - method: OPTIONS, path: /api/v1/marketplace/employees, client: 127.0.0.1
2026-02-09 22:47:58 - app.api.middleware - INFO - [unknown] - [ff27f2e9-be1d-4c13-a613-6fbe955151dd] 收到请求 - method: OPTIONS, path: /api/v1/marketplace/employees, client: 127.0.0.1
2026-02-09 22:47:58 - app.api.middleware - INFO - [unknown] - [40fdf643-d015-45dc-9210-ce4db2eaf667] 收到请求 - method: OPTIONS, path: /api/v1/employees/categories, client: 127.0.0.1
2026-02-09 22:47:58 - app.api.middleware - INFO - [unknown] - [547ad393-a54a-4196-ba86-ed2a82ac5f49] 收到请求 - method: OPTIONS, path: /api/v1/employees/categories, client: 127.0.0.1
2026-02-09 22:47:58 - app.api.middleware - INFO - [unknown] - [97876ad1-3252-4122-ad78-54b84f2842cf] 请求完成 - status: 200, duration: 0.006s
2026-02-09 22:47:58 - app.api.middleware - INFO - [unknown] - [ff27f2e9-be1d-4c13-a613-6fbe955151dd] 请求完成 - status: 200, duration: 0.006s
2026-02-09 22:47:58 - app.api.middleware - INFO - [unknown] - [40fdf643-d015-45dc-9210-ce4db2eaf667] 请求完成 - status: 200, duration: 0.006s
2026-02-09 22:47:58 - app.api.middleware - INFO - [unknown] - [547ad393-a54a-4196-ba86-ed2a82ac5f49] 请求完成 - status: 200, duration: 0.006s
2026-02-09 22:47:58 - app.api.middleware - INFO - [unknown] - [8978fcbb-7046-4d2a-ab7d-b7950c050080] 收到请求 - method: GET, path: /api/v1/marketplace/employees, client: 127.0.0.1
2026-02-09 22:47:58 - app.api.middleware - INFO - [unknown] - [2ad75ddd-bd92-4bd4-8a8c-05c577ba097f] 收到请求 - method: GET, path: /api/v1/employees/categories, client: 127.0.0.1
2026-02-09 22:47:58 - app.api.middleware - INFO - [unknown] - [b8ce1761-0094-4734-97f9-efd731ac1bff] 收到请求 - method: GET, path: /api/v1/employees/categories, client: 127.0.0.1
2026-02-09 22:47:58 - app.api.middleware - INFO - [unknown] - [745cc74b-4f6e-4569-986d-8c1d74fa85d4] 收到请求 - method: GET, path: /api/v1/marketplace/employees, client: 127.0.0.1
2026-02-09 22:47:58 - app.api.v1.endpoints.marketplace - INFO - [unknown] - [DEBUG] current_user: UserContext(user_id=anonymous, employee_id=emp_sys_002)[MOCK], user_id: anonymous
2026-02-09 22:47:58,408 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 22:47:58 - sqlalchemy.engine.Engine - INFO - [unknown] - BEGIN (implicit)
2026-02-09 22:47:58,414 INFO sqlalchemy.engine.Engine SELECT employees.id AS employees_id, employees.name AS employees_name, employees.description AS employees_description, employees.avatar AS employees_avatar, employees.category AS employees_category, employees.tags AS employees_tags, employees.price AS employees_price, employees.original_price AS employees_original_price, employees.trial_count AS employees_trial_count, employees.hire_count AS employees_hire_count, employees.is_hired AS employees_is_hired, employees.is_recruited AS employees_is_recruited, employees.status AS employees_status, employees.skills AS employees_skills, employees.knowledge_base_ids AS employees_knowledge_base_ids, employees.industry AS employees_industry, employees.`role` AS employees_role, employees.prompt AS employees_prompt, employees.model AS employees_model, employees.model_config AS employees_model_config, employees.is_hot AS employees_is_hot, employees.personality AS employees_personality, employees.welcome_message AS employees_welcome_message, employees.created_by AS employees_created_by, employees.organization_id AS employees_organization_id, employees.employee_type AS employees_employee_type, employees.is_system_default AS employees_is_system_default, employees.created_at AS employees_created_at, employees.updated_at AS employees_updated_at
FROM employees
WHERE employees.status = %(status_1)s AND employees.created_by = %(created_by_1)s ORDER BY employees.is_hot DESC, employees.hire_count DESC, employees.trial_count DESC
 LIMIT %(param_1)s, %(param_2)s
2026-02-09 22:47:58 - sqlalchemy.engine.Engine - INFO - [unknown] - SELECT employees.id AS employees_id, employees.name AS employees_name, employees.description AS employees_description, employees.avatar AS employees_avatar, employees.category AS employees_category, employees.tags AS employees_tags, employees.price AS employees_price, employees.original_price AS employees_original_price, employees.trial_count AS employees_trial_count, employees.hire_count AS employees_hire_count, employees.is_hired AS employees_is_hired, employees.is_recruited AS employees_is_recruited, employees.status AS employees_status, employees.skills AS employees_skills, employees.knowledge_base_ids AS employees_knowledge_base_ids, employees.industry AS employees_industry, employees.`role` AS employees_role, employees.prompt AS employees_prompt, employees.model AS employees_model, employees.model_config AS employees_model_config, employees.is_hot AS employees_is_hot, employees.personality AS employees_personality, employees.welcome_message AS employees_welcome_message, employees.created_by AS employees_created_by, employees.organization_id AS employees_organization_id, employees.employee_type AS employees_employee_type, employees.is_system_default AS employees_is_system_default, employees.created_at AS employees_created_at, employees.updated_at AS employees_updated_at
FROM employees
WHERE employees.status = %(status_1)s AND employees.created_by = %(created_by_1)s ORDER BY employees.is_hot DESC, employees.hire_count DESC, employees.trial_count DESC
 LIMIT %(param_1)s, %(param_2)s
2026-02-09 22:47:58,414 INFO sqlalchemy.engine.Engine [generated in 0.00137s] {'status_1': 'published', 'created_by_1': 'system', 'param_1': 0, 'param_2': 20} 
2026-02-09 22:47:58 - sqlalchemy.engine.Engine - INFO - [unknown] - [generated in 0.00137s] {'status_1': 'published', 'created_by_1': 'system', 'param_1': 0, 'param_2': 20}
2026-02-09 22:47:58,420 INFO sqlalchemy.engine.Engine SELECT hire_records.id AS hire_records_id, hire_records.employee_id AS hire_records_employee_id, hire_records.user_id AS hire_records_user_id, hire_records.organization_id AS hire_records_organization_id, hire_records.hired_at AS hire_records_hired_at, hire_records.expired_at AS hire_records_expired_at, hire_records.status AS hire_records_status, hire_records.settings AS hire_records_settings, hire_records.created_at AS hire_records_created_at, hire_records.updated_at AS hire_records_updated_at
FROM hire_records
WHERE hire_records.user_id = %(user_id_1)s AND hire_records.status = %(status_1)s
2026-02-09 22:47:58 - sqlalchemy.engine.Engine - INFO - [unknown] - SELECT hire_records.id AS hire_records_id, hire_records.employee_id AS hire_records_employee_id, hire_records.user_id AS hire_records_user_id, hire_records.organization_id AS hire_records_organization_id, hire_records.hired_at AS hire_records_hired_at, hire_records.expired_at AS hire_records_expired_at, hire_records.status AS hire_records_status, hire_records.settings AS hire_records_settings, hire_records.created_at AS hire_records_created_at, hire_records.updated_at AS hire_records_updated_at
FROM hire_records
WHERE hire_records.user_id = %(user_id_1)s AND hire_records.status = %(status_1)s
2026-02-09 22:47:58,422 INFO sqlalchemy.engine.Engine [generated in 0.00135s] {'user_id_1': 'anonymous', 'status_1': 'active'}
2026-02-09 22:47:58 - sqlalchemy.engine.Engine - INFO - [unknown] - [generated in 0.00135s] {'user_id_1': 'anonymous', 'status_1': 'active'}
2026-02-09 22:47:58,425 INFO sqlalchemy.engine.Engine SELECT count(employees.id) AS count_1
FROM employees
WHERE employees.status = %(status_1)s
2026-02-09 22:47:58 - sqlalchemy.engine.Engine - INFO - [unknown] - SELECT count(employees.id) AS count_1
FROM employees
WHERE employees.status = %(status_1)s
2026-02-09 22:47:58,427 INFO sqlalchemy.engine.Engine [generated in 0.00115s] {'status_1': 'published'}
2026-02-09 22:47:58 - sqlalchemy.engine.Engine - INFO - [unknown] - [generated in 0.00115s] {'status_1': 'published'}
2026-02-09 22:47:58 - app.api.v1.endpoints.marketplace - INFO - [unknown] - 获取市场员工列表 - 用户: anonymous, 页码: 1, 数量: 5
2026-02-09 22:47:58,436 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 22:47:58 - sqlalchemy.engine.Engine - INFO - [unknown] - BEGIN (implicit)
2026-02-09 22:47:58,438 INFO sqlalchemy.engine.Engine SELECT employees.id AS employees_id, employees.name AS employees_name, employees.description AS employees_description, employees.avatar AS employees_avatar, employees.category AS employees_category, employees.tags AS employees_tags, employees.price AS employees_price, employees.original_price AS employees_original_price, employees.trial_count AS employees_trial_count, employees.hire_count AS employees_hire_count, employees.is_hired AS employees_is_hired, employees.is_recruited AS employees_is_recruited, employees.status AS employees_status, employees.skills AS employees_skills, employees.knowledge_base_ids AS employees_knowledge_base_ids, employees.industry AS employees_industry, employees.`role` AS employees_role, employees.prompt AS employees_prompt, employees.model AS employees_model, employees.model_config AS employees_model_config, employees.is_hot AS employees_is_hot, employees.personality AS employees_personality, employees.welcome_message AS employees_welcome_message, employees.created_by AS employees_created_by, employees.organization_id AS employees_organization_id, employees.employee_type AS employees_employee_type, employees.is_system_default AS employees_is_system_default, employees.created_at AS employees_created_at, employees.updated_at AS employees_updated_at
FROM employees
WHERE employees.status = %(status_1)s
2026-02-09 22:47:58 - sqlalchemy.engine.Engine - INFO - [unknown] - SELECT employees.id AS employees_id, employees.name AS employees_name, employees.description AS employees_description, employees.avatar AS employees_avatar, employees.category AS employees_category, employees.tags AS employees_tags, employees.price AS employees_price, employees.original_price AS employees_original_price, employees.trial_count AS employees_trial_count, employees.hire_count AS employees_hire_count, employees.is_hired AS employees_is_hired, employees.is_recruited AS employees_is_recruited, employees.status AS employees_status, employees.skills AS employees_skills, employees.knowledge_base_ids AS employees_knowledge_base_ids, employees.industry AS employees_industry, employees.`role` AS employees_role, employees.prompt AS employees_prompt, employees.model AS employees_model, employees.model_config AS employees_model_config, employees.is_hot AS employees_is_hot, employees.personality AS employees_personality, employees.welcome_message AS employees_welcome_message, employees.created_by AS employees_created_by, employees.organization_id AS employees_organization_id, employees.employee_type AS employees_employee_type, employees.is_system_default AS employees_is_system_default, employees.created_at AS employees_created_at, employees.updated_at AS employees_updated_at
FROM employees
WHERE employees.status = %(status_1)s
2026-02-09 22:47:58,439 INFO sqlalchemy.engine.Engine [generated in 0.00134s] {'status_1': 'published'}
2026-02-09 22:47:58 - sqlalchemy.engine.Engine - INFO - [unknown] - [generated in 0.00134s] {'status_1': 'published'}
2026-02-09 22:47:58 - app.api.v1.endpoints.employees - INFO - [unknown] - 获取分类列表 - 数量: 9
2026-02-09 22:47:58,469 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 22:47:58 - sqlalchemy.engine.Engine - INFO - [unknown] - BEGIN (implicit)
2026-02-09 22:47:58,470 INFO sqlalchemy.engine.Engine SELECT employees.id AS employees_id, employees.name AS employees_name, employees.description AS employees_description, employees.avatar AS employees_avatar, employees.category AS employees_category, employees.tags AS employees_tags, employees.price AS employees_price, employees.original_price AS employees_original_price, employees.trial_count AS employees_trial_count, employees.hire_count AS employees_hire_count, employees.is_hired AS employees_is_hired, employees.is_recruited AS employees_is_recruited, employees.status AS employees_status, employees.skills AS employees_skills, employees.knowledge_base_ids AS employees_knowledge_base_ids, employees.industry AS employees_industry, employees.`role` AS employees_role, employees.prompt AS employees_prompt, employees.model AS employees_model, employees.model_config AS employees_model_config, employees.is_hot AS employees_is_hot, employees.personality AS employees_personality, employees.welcome_message AS employees_welcome_message, employees.created_by AS employees_created_by, employees.organization_id AS employees_organization_id, employees.employee_type AS employees_employee_type, employees.is_system_default AS employees_is_system_default, employees.created_at AS employees_created_at, employees.updated_at AS employees_updated_at
FROM employees
WHERE employees.status = %(status_1)s
2026-02-09 22:47:58 - sqlalchemy.engine.Engine - INFO - [unknown] - SELECT employees.id AS employees_id, employees.name AS employees_name, employees.description AS employees_description, employees.avatar AS employees_avatar, employees.category AS employees_category, employees.tags AS employees_tags, employees.price AS employees_price, employees.original_price AS employees_original_price, employees.trial_count AS employees_trial_count, employees.hire_count AS employees_hire_count, employees.is_hired AS employees_is_hired, employees.is_recruited AS employees_is_recruited, employees.status AS employees_status, employees.skills AS employees_skills, employees.knowledge_base_ids AS employees_knowledge_base_ids, employees.industry AS employees_industry, employees.`role` AS employees_role, employees.prompt AS employees_prompt, employees.model AS employees_model, employees.model_config AS employees_model_config, employees.is_hot AS employees_is_hot, employees.personality AS employees_personality, employees.welcome_message AS employees_welcome_message, employees.created_by AS employees_created_by, employees.organization_id AS employees_organization_id, employees.employee_type AS employees_employee_type, employees.is_system_default AS employees_is_system_default, employees.created_at AS employees_created_at, employees.updated_at AS employees_updated_at
FROM employees
WHERE employees.status = %(status_1)s
2026-02-09 22:47:58,472 INFO sqlalchemy.engine.Engine [cached since 0.03418s ago] {'status_1': 'published'}
2026-02-09 22:47:58 - sqlalchemy.engine.Engine - INFO - [unknown] - [cached since 0.03418s ago] {'status_1': 'published'}
2026-02-09 22:47:58 - app.api.v1.endpoints.employees - INFO - [unknown] - 获取分类列表 - 数量: 9
2026-02-09 22:47:58 - app.api.v1.endpoints.marketplace - INFO - [unknown] - [DEBUG] current_user: UserContext(user_id=anonymous, employee_id=emp_sys_002)[MOCK], user_id: anonymous
2026-02-09 22:47:58,499 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 22:47:58 - sqlalchemy.engine.Engine - INFO - [unknown] - BEGIN (implicit)
2026-02-09 22:47:58,501 INFO sqlalchemy.engine.Engine SELECT employees.id AS employees_id, employees.name AS employees_name, employees.description AS employees_description, employees.avatar AS employees_avatar, employees.category AS employees_category, employees.tags AS employees_tags, employees.price AS employees_price, employees.original_price AS employees_original_price, employees.trial_count AS employees_trial_count, employees.hire_count AS employees_hire_count, employees.is_hired AS employees_is_hired, employees.is_recruited AS employees_is_recruited, employees.status AS employees_status, employees.skills AS employees_skills, employees.knowledge_base_ids AS employees_knowledge_base_ids, employees.industry AS employees_industry, employees.`role` AS employees_role, employees.prompt AS employees_prompt, employees.model AS employees_model, employees.model_config AS employees_model_config, employees.is_hot AS employees_is_hot, employees.personality AS employees_personality, employees.welcome_message AS employees_welcome_message, employees.created_by AS employees_created_by, employees.organization_id AS employees_organization_id, employees.employee_type AS employees_employee_type, employees.is_system_default AS employees_is_system_default, employees.created_at AS employees_created_at, employees.updated_at AS employees_updated_at
FROM employees
WHERE employees.status = %(status_1)s AND employees.created_by = %(created_by_1)s ORDER BY employees.is_hot DESC, employees.hire_count DESC, employees.trial_count DESC
 LIMIT %(param_1)s, %(param_2)s
2026-02-09 22:47:58 - sqlalchemy.engine.Engine - INFO - [unknown] - SELECT employees.id AS employees_id, employees.name AS employees_name, employees.description AS employees_description, employees.avatar AS employees_avatar, employees.category AS employees_category, employees.tags AS employees_tags, employees.price AS employees_price, employees.original_price AS employees_original_price, employees.trial_count AS employees_trial_count, employees.hire_count AS employees_hire_count, employees.is_hired AS employees_is_hired, employees.is_recruited AS employees_is_recruited, employees.status AS employees_status, employees.skills AS employees_skills, employees.knowledge_base_ids AS employees_knowledge_base_ids, employees.industry AS employees_industry, employees.`role` AS employees_role, employees.prompt AS employees_prompt, employees.model AS employees_model, employees.model_config AS employees_model_config, employees.is_hot AS employees_is_hot, employees.personality AS employees_personality, employees.welcome_message AS employees_welcome_message, employees.created_by AS employees_created_by, employees.organization_id AS employees_organization_id, employees.employee_type AS employees_employee_type, employees.is_system_default AS employees_is_system_default, employees.created_at AS employees_created_at, employees.updated_at AS employees_updated_at
FROM employees
WHERE employees.status = %(status_1)s AND employees.created_by = %(created_by_1)s ORDER BY employees.is_hot DESC, employees.hire_count DESC, employees.trial_count DESC
 LIMIT %(param_1)s, %(param_2)s
2026-02-09 22:47:58,501 INFO sqlalchemy.engine.Engine [cached since 0.08845s ago] {'status_1': 'published', 'created_by_1': 'system', 'param_1': 0, 'param_2': 20}
2026-02-09 22:47:58 - sqlalchemy.engine.Engine - INFO - [unknown] - [cached since 0.08845s ago] {'status_1': 'published', 'created_by_1': 'system', 'param_1': 0, 'param_2': 20}
2026-02-09 22:47:58,506 INFO sqlalchemy.engine.Engine SELECT hire_records.id AS hire_records_id, hire_records.employee_id AS hire_records_employee_id, hire_records.user_id AS hire_records_user_id, hire_records.organization_id AS hire_records_organization_id, hire_records.hired_at AS hire_records_hired_at, hire_records.expired_at AS hire_records_expired_at, hire_records.status AS hire_records_status, hire_records.settings AS hire_records_settings, hire_records.created_at AS hire_records_created_at, hire_records.updated_at AS hire_records_updated_at
FROM hire_records
WHERE hire_records.user_id = %(user_id_1)s AND hire_records.status = %(status_1)s
2026-02-09 22:47:58 - sqlalchemy.engine.Engine - INFO - [unknown] - SELECT hire_records.id AS hire_records_id, hire_records.employee_id AS hire_records_employee_id, hire_records.user_id AS hire_records_user_id, hire_records.organization_id AS hire_records_organization_id, hire_records.hired_at AS hire_records_hired_at, hire_records.expired_at AS hire_records_expired_at, hire_records.status AS hire_records_status, hire_records.settings AS hire_records_settings, hire_records.created_at AS hire_records_created_at, hire_records.updated_at AS hire_records_updated_at
FROM hire_records
WHERE hire_records.user_id = %(user_id_1)s AND hire_records.status = %(status_1)s
2026-02-09 22:47:58,507 INFO sqlalchemy.engine.Engine [cached since 0.08666s ago] {'user_id_1': 'anonymous', 'status_1': 'active'}
2026-02-09 22:47:58 - sqlalchemy.engine.Engine - INFO - [unknown] - [cached since 0.08666s ago] {'user_id_1': 'anonymous', 'status_1': 'active'}
2026-02-09 22:47:58,510 INFO sqlalchemy.engine.Engine SELECT count(employees.id) AS count_1
FROM employees
WHERE employees.status = %(status_1)s
2026-02-09 22:47:58 - sqlalchemy.engine.Engine - INFO - [unknown] - SELECT count(employees.id) AS count_1
FROM employees
WHERE employees.status = %(status_1)s
2026-02-09 22:47:58,510 INFO sqlalchemy.engine.Engine [cached since 0.08513s ago] {'status_1': 'published'}
2026-02-09 22:47:58 - sqlalchemy.engine.Engine - INFO - [unknown] - [cached since 0.08513s ago] {'status_1': 'published'}
2026-02-09 22:47:58 - app.api.v1.endpoints.marketplace - INFO - [unknown] - 获取市场员工列表 - 用户: anonymous, 页码: 1, 数量: 5
2026-02-09 22:47:58 - app.api.middleware - INFO - [unknown] - [8978fcbb-7046-4d2a-ab7d-b7950c050080] 请求完成 - status: 200, duration: 0.124s
2026-02-09 22:47:58 - app.api.middleware - INFO - [unknown] - [2ad75ddd-bd92-4bd4-8a8c-05c577ba097f] 请求完成 - status: 200, duration: 0.121s
2026-02-09 22:47:58 - app.api.middleware - INFO - [unknown] - [b8ce1761-0094-4734-97f9-efd731ac1bff] 请求完成 - status: 200, duration: 0.120s
2026-02-09 22:47:58 - app.api.middleware - INFO - [unknown] - [745cc74b-4f6e-4569-986d-8c1d74fa85d4] 请求完成 - status: 200, duration: 0.121s
2026-02-09 22:47:58,521 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 22:47:58 - sqlalchemy.engine.Engine - INFO - [unknown] - ROLLBACK
2026-02-09 22:47:58,521 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 22:47:58 - sqlalchemy.engine.Engine - INFO - [unknown] - ROLLBACK
2026-02-09 22:47:58,522 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 22:47:58 - sqlalchemy.engine.Engine - INFO - [unknown] - ROLLBACK
2026-02-09 22:47:58,522 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 22:47:58 - sqlalchemy.engine.Engine - INFO - [unknown] - ROLLBACK
